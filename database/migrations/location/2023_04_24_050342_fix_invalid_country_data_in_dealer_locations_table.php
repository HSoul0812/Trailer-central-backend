<?php

use App\Models\User\DealerLocation;
use Illuminate\Database\Migrations\Migration;

class FixInvalidCountryDataInDealerLocationsTable extends Migration
{
    private const DEALERS_WITH_LOCATIONS_IN_US = [
        '7650',
        '7649',
        '7648',
        '7647',
        '7646',
        '7645',
        '7643',
        '7642',
        '7504',
        '7495',
        '7494',
        '7481',
        '7468',
        '7458',
        '7454',
        '7441',
        '7440',
        '7420',
        '7419',
        '7418',
        '7396',
        '7395',
        '7394',
        '7392',
        '7390',
        '7389',
        '7388',
        '7387',
        '7386',
        '7385',
        '7384',
        '7383',
        '7382',
        '7381',
        '7380',
        '7379',
        '7378',
        '7377',
        '7376',
        '7375',
        '7374',
        '7373',
        '7372',
        '7371',
        '6754',
        '6752',
        '6751',
        '6749',
        '6748',
        '6747',
        '6746',
        '6744',
        '6741',
        '6734',
        '6731',
        '6725',
        '6717',
        '6716',
        '6714',
        '6712',
        '6712',
        '6711',
        '6710',
        '6707',
        '6705',
        '6703',
        '6703',
        '6701',
        '6699',
        '6698',
        '6697',
        '6695',
        '6693',
        '6691',
        '6690',
        '6687',
        '6686',
        '6683',
        '6680',
        '6680',
        '6679',
        '6679',
        '6672',
        '6670',
        '6670',
        '6669',
        '6669',
        '6668',
        '6667',
        '6667',
        '6666',
        '6665',
        '6663',
        '6662',
        '6659',
        '6658',
        '6656',
        '6654',
        '6652',
        '6651',
        '6649',
        '6647',
        '6647',
        '6647',
        '6645',
        '6645',
        '6644',
        '6642',
        '6641',
        '6640',
        '6639',
        '6639',
        '6638',
        '6636',
        '6635',
        '6634',
        '6632',
        '6632',
        '6632',
        '6621',
        '6620',
        '6616',
        '6613',
        '6612',
        '6611',
        '6610',
        '6609',
        '6609',
        '6606',
        '6605',
        '6604',
        '6602',
        '6602',
        '6602',
        '6601',
        '6600',
        '6599',
        '6597',
        '6592',
        '6591',
        '6588',
        '6587',
        '6584',
        '6583',
        '6582',
        '6581',
        '6581',
        '6580',
        '6577',
        '6576',
        '6575',
        '6572',
        '6571',
        '6570',
        '6566',
        '6565',
        '6563',
        '6562',
        '6560',
        '6557',
        '6555',
        '6546',
        '6522',
        '6095',
        '6095',
        '6095',
        '5781',
        '5646',
        '5403',
        '3811'
    ];

    private const DEALERS_WITH_LOCATIONS_IN_CANADA = [
        '7644',
        '7641',
        '7641',
        '7391',
        '7370',
        '6545',
        '4096',
        '4038',
        '12819'
    ];

    /**
     * Run the migrations.
     *
     * @return void
     */
    public function up()
    {
        //update US to USA to be consistent with geolocation table.
        DealerLocation::where('country', 'US')->update([
            'country' => 'USA'
        ]);

        DealerLocation::whereIn('dealer_id', self::DEALERS_WITH_LOCATIONS_IN_US)
            ->where('country', '<>', 'CA')->update([
                'country' => 'USA'
            ]);

        DealerLocation::whereIn('dealer_id', self::DEALERS_WITH_LOCATIONS_IN_CANADA)
            ->where('country', '<>', 'USA')->update([
                'country' => 'CA'
            ]);
    }

    /**
     * Reverse the migrations.
     *
     * @return void
     */
    public function down()
    {
    }
}
